@import "tailwindcss";

@theme inline {
  --color-bg-deep: #f5f6f8;
  --color-bg-card: #ffffff;
  --color-bg-surface: #eef0f4;
  --color-accent: #ff6b2b;
  --color-gold: #ffd700;
  --color-text-primary: #1a1c2b;
  --color-text-secondary: #6b7280;
  --color-success: #4ade80;
  --color-danger: #ef4444;
  --color-accent-dim: #ff6b2b22;
  --color-gold-dim: #ffd70022;
  --color-success-dim: #4ade8022;
  --font-sans: var(--font-geist-sans), system-ui, -apple-system, sans-serif;
}

/* ライトモード (デフォルト) - クリーンな白基調 */
:root {
  --color-bg-deep: #f5f6f8;
  --color-bg-card: #ffffff;
  --color-bg-surface: #eef0f4;
  --color-text-primary: #1a1c2b;
  --color-text-secondary: #6b7280;
  --color-accent-dim: #ff6b2b22;
  --color-gold-dim: #ffd70022;
  --color-success-dim: #4ade8022;
  --adventure-bg: linear-gradient(170deg, #f5f6f8 0%, #eef0f8 40%, #f2f4fa 70%, #f5f6f8 100%);
  --adventure-overlay: radial-gradient(ellipse at 30% 30%, rgba(100, 130, 200, 0.04) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 70%, rgba(255, 107, 43, 0.03) 0%, transparent 50%);
}

/* ダークモード */
[data-theme="dark"] {
  --color-bg-deep: #0f0f13;
  --color-bg-card: #1a1a24;
  --color-bg-surface: #252535;
  --color-text-primary: #e8e6e3;
  --color-text-secondary: #9996a6;
  --color-accent-dim: #ff6b2b33;
  --color-gold-dim: #ffd70033;
  --color-success-dim: #4ade8033;
  --adventure-bg: linear-gradient(170deg, #0f0f13 0%, #1a1028 40%, #0d1520 70%, #0f0f13 100%);
  --adventure-overlay: radial-gradient(ellipse at 20% 20%, rgba(100, 80, 160, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 60%, rgba(30, 60, 120, 0.06) 0%, transparent 50%);
}

body {
  background: var(--adventure-bg);
  color: var(--color-text-primary);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--adventure-overlay);
  pointer-events: none;
  z-index: 0;
}

/* XPバー アニメーション */
@keyframes xp-fill {
  from { width: 0%; }
}

.xp-bar-animate {
  animation: xp-fill 0.6s ease-out;
}

/* レベルアップ グロー */
@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 8px var(--color-accent); }
  50% { box-shadow: 0 0 24px var(--color-accent), 0 0 48px var(--color-accent-dim); }
}

.glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* チェックボタン タップフィードバック */
@keyframes check-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.check-pop {
  animation: check-pop 0.2s ease-out;
}

/* モーダル フェードイン */
@keyframes fade-in {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

.modal-enter {
  animation: fade-in 0.3s ease-out;
}

/* テーマ切り替えトランジション */
body,
body * {
  transition: background-color 0.3s ease, color 0.2s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* === レベルアップ演出アニメーション === */

/* 画面全体の金色フラッシュ */
@keyframes screen-flash {
  0% { opacity: 0.7; }
  100% { opacity: 0; }
}

/* LEVEL UP! タイトルのバウンド登場 */
@keyframes title-burst {
  0% { transform: scale(0); opacity: 0; }
  60% { transform: scale(1.3); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

/* 剣振り下ろし */
@keyframes anvil-strike {
  0% { transform: translateY(-60px) rotate(-15deg); opacity: 0; }
  50% { transform: translateY(4px) rotate(3deg); opacity: 1; }
  70% { transform: translateY(-2px) rotate(-1deg); }
  100% { transform: translateY(0) rotate(0deg); }
}

/* ステータス行のスライドイン */
@keyframes stat-slide-in {
  0% { transform: translateX(-20px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

/* +値のポップ */
@keyframes number-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.4); color: var(--color-gold); }
  100% { transform: scale(1); }
}

/* 光の粒の放射 */
@keyframes sparkle {
  0% { transform: translate(0, 0) scale(1); opacity: 1; }
  100% { transform: translate(var(--sx), var(--sy)) scale(0); opacity: 0; }
}

/* レベル数字背後の光輪 */
@keyframes ring-expand {
  0% { transform: scale(0.3); opacity: 0.8; }
  100% { transform: scale(2.5); opacity: 0; }
}

/* XPバーの脈動グロー (80%超) */
@keyframes xp-glow {
  0%, 100% { box-shadow: 0 0 4px var(--color-accent); }
  50% { box-shadow: 0 0 14px var(--color-accent), 0 0 28px var(--color-accent-dim); }
}

.xp-glow {
  animation: xp-glow 1.5s ease-in-out infinite;
}

/* 紙吹雪 (全達成ボーナス用) */
@keyframes confetti-piece {
  0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(40px) rotate(360deg); opacity: 0; }
}

/* XP数字の上昇フェードアウト */
@keyframes float-up {
  0% { transform: translateY(0); opacity: 1; }
  100% { transform: translateY(-20px); opacity: 0; }
}

/* 金色シマーエフェクト */
@keyframes gold-shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

.gold-shimmer {
  background: linear-gradient(
    90deg,
    var(--color-gold) 0%,
    #fff8c4 40%,
    var(--color-gold) 60%,
    #fff8c4 80%,
    var(--color-gold) 100%
  );
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gold-shimmer 2s linear infinite;
}

/* 確定ボタン強化グロー */
@keyframes btn-glow-strong {
  0%, 100% { box-shadow: 0 0 8px var(--color-accent), 0 0 16px var(--color-accent-dim); }
  50% { box-shadow: 0 0 16px var(--color-accent), 0 0 32px var(--color-accent-dim), 0 0 48px var(--color-accent-dim); }
}

.btn-glow-strong {
  animation: btn-glow-strong 1.8s ease-in-out infinite;
}

/* === 日常フィードバック演出 === */

/* チェック時リップル (カテゴリ色のリング放射) */
@keyframes check-ripple {
  0% { transform: scale(1); opacity: 0.6; }
  100% { transform: scale(2.2); opacity: 0; }
}

.check-ripple {
  position: relative;
}

.check-ripple::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 9999px;
  border: 2px solid var(--ripple-color, var(--color-accent));
  animation: check-ripple 0.4s ease-out forwards;
  pointer-events: none;
}

/* 確定時の控えめフラッシュ */
@keyframes submit-flash {
  0% { opacity: 0.25; }
  100% { opacity: 0; }
}

.submit-flash {
  animation: submit-flash 0.4s ease-out forwards;
}

/* XP数字の上昇フェードアウト (クラス化) */
.float-up-anim {
  animation: float-up 1.2s ease-out forwards;
}

/* 紙吹雪 (クラス化) */
.confetti {
  animation: confetti-piece 1s ease-out forwards;
}

/* 確定後テキストのフェードイン */
@keyframes fade-in-delayed {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

.fade-in-delayed {
  animation: fade-in-delayed 0.4s ease-out forwards;
  animation-delay: 0.8s;
  opacity: 0;
}

/* === 覚悟ゲージ演出 === */

/* 最高ティアのゲージグロー */
@keyframes gauge-glow {
  0%, 100% { box-shadow: 0 0 4px var(--color-gold), 0 0 8px var(--color-gold-dim); }
  50% { box-shadow: 0 0 8px var(--color-gold), 0 0 16px var(--color-gold-dim), 0 0 24px var(--color-gold-dim); }
}

.gauge-glow {
  animation: gauge-glow 2s ease-in-out infinite;
}

/* スクロールバー */
::-webkit-scrollbar {
  width: 4px;
}
::-webkit-scrollbar-track {
  background: var(--color-bg-deep);
}
::-webkit-scrollbar-thumb {
  background: var(--color-bg-surface);
  border-radius: 2px;
}
